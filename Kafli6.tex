Við höfum komist að því hvernig búa má til töflur sem vísa hver í aðra. Við höfum líka komist að því hvernig ná má í upplýsingar úr einni töflu.

Nú skulum við líta á hvernig búa má til skipanir sem velja upplýsingar úr fleiri en einni töflu. Til þess þurfum við að læra hvernig stækka má \verb|FROM| klausuna svo að hún geti meðhöndlað margar töflur.
\section{Nöfn dálka}
Áður en lengra er haldið skulum við skoða betur dálitla ónákvæmni sem við höfum sætt okkur við hingað til.

Þegar við höfum vísað í dálk hefur okkur dugað að skrifa einfaldlega nafn hans. Við höfum ekki séð mikið að því að skrifa \verb|WHERE| klausur á borð við \verb|WHERE numer = 11|.

Þetta verður hins vegar erfiðara þegar við vinnum með margar töflur í einu. Hvað ef við erum að vinna með tvær töflur þar sem báðar töflurnar eru með dálk sem heitir \verb|numer|?

Til að passa upp á að gagnagrunnskerfið viti hvaða dálk við eigum við þurfum við oft að taka fram í hvaða töflu dálkurinn sem við erum að nefna er. Þetta er gert með því að skipta út nafninu á dálkinum fyrir ``fullt nafn'' hans. Til að fá fullt nafn dálks skrifum við fyrst nafn töflunnar sem hann er í, svo punkt, svo nafn dálksins. Þannig má vísa í dálkinn \verb|a| í töflunni \verb|A| með því að skrifa \verb|A.a|.

Notkun á fullu nafni dálks má sjá á sýnidæmi \ref{sql:k6d1-fullt-nafn}.

\begin{example}
\caption[Fullt nafn dálks]{Tvær \emph{SELECT} skipanir sem gera það sama - velja auðkenni áfanga úr áfangatöflunni þar sem raðnúmer línunnar er $1$. Munurinn er sá að í seinni skipuninni er tekið fram í hvaða töflu dálkurinn \emph{numer} er.}
\label{sql:k6d1-fullt-nafn}
\centering
\sql{sql/k6d1-fullt-nafn.sql}
\end{example}

\subsection{Að endurnefna - AS}
Það að vinna með heiti getur verið þreytandi. Til að vinna með dálka og töflur undir öðru nafni má nota lykilorðið \verb|AS|. Þetta býr til ``aukanafn''\footnote{e. \emph{alias}} fyrir fyrirbrigðið sem unnið er með. Gamla nafninu er ekki breytt í gagnagrunnskerfinu, \verb|AS| býr bara til nýtt nafn til að nota tímabundið.

Sjá má endurnefndan dálk á sýnidæmi \ref{sql:k6d2-nytt-nafn}.

\begin{example}
\caption[Endurnefning]{Endurnefning dálks. Dálkurinn \emph{audkenni} mun birtast sem \emph{afangi} í niðurstöðum þessarar skipunar.}
\label{sql:k6d2-nytt-nafn}
\centering
\sql{sql/k6d2-nytt-nafn.sql}
\end{example}

\section{Að velja úr meira en einni töflu - JOIN}
Til að segja hvaðan upplýsingarnar sem við ætlum að vinna með í \verb|SELECT| skipun eiga að koma notum við \verb|FROM| klausu.

Hingað til hefur \verb|FROM| klausan ekki innihaldið annað en orðið \verb|FROM| og nafnið á töflunni. Þetta er villandi einfalt. Rifjum upp hvað við sögðum þegar við kynntumst \verb|FROM| klausunni fyrst (undirkafli \ref{undirkafli:from}):
\begin{quote}
\emph{FROM klausa lýsir því hvaðan upplýsingar koma.}
\end{quote}
Þessi lýsing getur innihaldið meira en eina töflu. Almennt séð myndar \verb|FROM| klausan sem sagt \emph{mengi} upplýsinga sem hægt er að vinna með.

Til að skilgreina mengi sem tekur upplýsingar sínar úr tveimur eða fleiri töflum bætum við lykilorðinu \verb|JOIN| (ásamt fleiri lykilorðum) við \verb|FROM| klausuna.

\subsection{INNER JOIN}
\verb|INNER JOIN| er sú leið sem langmest er notuð til að ná upplýsingum úr mörgum töflum. 

Til að skilja \verb|INNER JOIN| betur skulum við skoða aftur hvernig töflur voru tengdar saman með aðkomulyklum (undirkafli \ref{undirkafli:adkomulyklar}).
Aðkomulyklar tengja töflur saman með því að halda utan um gögn sem eru sameiginleg í tveimur töflum. \verb|INNER JOIN| nýtir sér þessi sameiginlegu gögn til að smíða eitt stórt mengi sem vinna má með.

Lítum á mynd \ref{mynd:inner-join}.

\begin{figure}
\caption[INNER JOIN]{Sýnir hvernig \emph{SELECT} skipun með \emph{INNER JOIN} velur einungis þær línur úr töflunum $A$ og $B$ sem dálkarnir $numerA$ og $numerB$ eiga sameiginlegar.}
\label{mynd:inner-join}
\centering
\includegraphics[width=\linewidth]{myndir/inner-join}
\end{figure}

Þar má sjá gildi í tveimur töflum borin saman. Þessi samanburður á sér stað í \verb|ON| hluta skipunarinnar. Hann er líkur samanburði í \verb|WHERE| klausu, en hefur það sérstaka hlutverk að bera saman línur í tveimur mismunandi töflum.

Fyrir utan það að \verb|FROM| klausan er stærri, þá virkar \verb|SELECT| skipun sem velur úr fleiri en einni töflu alveg eins og \verb|SELECT| skipun sem vinnur bara með eina töflu. Hægt er að velja hvaða dálk úr töflunum tveimur sem er.

Sjá má raunverulegri notkun á \verb|INNER JOIN| á sýnidæmi \ref{sql:k6d3-inner-join}.

\begin{example}
\caption[INNER JOIN]{\emph{SELECT} skipun sem velur úr töflunum \emph{Fog} og \emph{Afangar}. Niðurstöðurnar má sjá á mynd \ref{mynd:nidurstada-join}.}
\label{sql:k6d3-inner-join}
\centering
\sql{sql/k6d3-inner-join.sql}
\end{example}

\begin{figure}
\caption[INNER JOIN niðurstaða]{Niðurstaða \emph{SELECT} skipunarinnar í dæmi \ref{sql:k6d3-inner-join}. }
\label{mynd:nidurstada-join}
\centering
\includegraphics{myndir/workbench-nidurstada-join}
\end{figure}

Hægt er að tengja saman meira en tvær töflur með því að skrifa mörg \verb|JOIN| í sömu \verb|FROM| klausunni. Sjá sýnidæmi \ref{sql:k6d4-tvofalt-join}.

Þegar valið er úr mörgum töflum má líta á það sem svo að sífellt sé verið að stækka það mengi sem valið er úr, eina töflu í einu. Passa þarf upp á að tenging sé á milli allra taflanna sem taldar eru upp. Lína þarf að uppfylla öll skilyrðin í \verb|ON| hlutum skipunarinnar til að geta birst í niðurstöðunum.

\begin{example}
\caption[INNER JOIN]{\emph{SELECT} skipun sem velur nöfn hópa, hvaða áföngum hóparnir tilheyra og hver kennir þá, úr töflunum \emph{Hopar}, \emph{Afangar} og \emph{Starfsmenn}.}
\label{sql:k6d4-tvofalt-join}
\centering
\sql{sql/k6d4-tvofalt-join.sql}
\end{example}

\subsection{OUTER JOIN}
\section{Undirfyrirspurnir}
\label{undirkafli:undirfyrirspurnir}





