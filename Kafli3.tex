Í kafla \ref{undirkafli:synidaemi-i-sql} sáum við dæmi um hvernig búa má til töflu með SQL-skipun. Hins vegar eyddum við ekki sérstaklega miklum tíma í að reyna að skilja hvernig skipunin er uppbyggð, hvað öll lykilorðin sem fram komu þýddu eða hvað er leyfilegt. Viðfangsefni kaflans sem við erum stödd í núna verður að leiðrétta þennan trassaskap og sökkva okkur í töflugerð.
\section{Að búa til töflu} % CREATE
Tökum skref aftur á bak frá og athugum hversu einfalda töflu við getum búið til. Hún er líklega eitthvað á þá leið sem sjá má á sýnidæmi \ref{sql:k3d1-create-table-fallegt}.

\begin{example}[h]
\caption[Mjög einföld tafla]{Mjög einföld tafla. Athugum að ``NafnToflu'' og ``nafnDalks'' er ekki hluti af SQL-málinu, heldur bara dæmi um hvernig heiti á töflum og dálkum eru skilgreind.}
\label{sql:k3d1-create-table-fallegt}
\centering
\sql{sql/k3d1-create-table-fallegt.sql}
\end{example}

Skoðum þessa skipun nú mjög vandlega.
\begin{itemize}
 \item Hún hefst á að lýsa yfir hvað gera skal - hér er það \verb|CREATE TABLE|. Næst kemur nafn töflunnar fram.
 \item Þegar nafn töflunnar hefur verið gefið opnast svigi.
 \item Inni í sviganum kemur nafnið á einum dálki og orðið \verb|INTEGER|\footnote{Merkingin á þessum lykilorðum sem við höfum séð á eftir dálkheitunum, \emph{INTEGER} og \emph{VARCHAR}, útskýrist í næsta undirkafla (\ref{undirkafli:gagnagerdir}).}. Hér er einungis einn dálkur.
 \item Skipuninni lýkur á því að sviganum er lokað og semíkomma (;) sett á eftir.
\end{itemize}

Skoðum næst sýnidæmi \ref{sql:k3d2-create-table-meira-fallegt}, sem er \emph{örlítið} stærra.
\begin{example}[h]
\caption{Einföld tafla}
\label{sql:k3d2-create-table-meira-fallegt}
\centering
\sql{sql/k3d2-create-table-meira-fallegt.sql}
\end{example}

Hér sjáum við ágætlega hvernig bæta má við öðrum dálki. Fyrsta dálklýsingin er skrifuð, síðan kemur komma, síðan fylgir næsta dálklýsing.

Athugum að engin komma er á eftir síðustu dálklýsingunni. Það er vegna þess að dálkarnir eru einungis \emph{aðskildir} með kommum, komman er ekki hluti af dálklýsingunni sjálfri.
\section{Helstu gagnagerðir} % INTEGER (INT), VARCHAR, CHAR, DATE
\label{undirkafli:gagnagerdir}
Einni stórri spurningu um síðustu tvö dæmi er enn ósvarað - hvað er þetta \verb|INTEGER|?

Integer er dæmi um svokallaða gagnagerð\footnote{e. \emph{data type}}. Nánar til tekið er þetta gagnagerð sem táknar heiltölur, tölur eins og töluna $1$, töluna $42$ og töluna $-256$. Þegar \verb|INTEGER| kemur fyrir í dálkskilgreiningu erum við sem sagt að segja gagnagrunnskerfinu að við munum einungis geyma heiltölur í þessum dálki.

Skoðum nokkrar helstu gagnagerðir í MySQL og hvenær við notum þær.
\subsection{INTEGER}
Fram hefur komið að \verb|INTEGER| dálkur geymi heiltölur. Hann tekur ekki við kommutölum.\footnote{Í stað \emph{INTEGER} má skrifa styttinguna \emph{INT}, sem hefur sömu áhrif.}

Lægsta talan sem slíkur dálkur getur geymt er $-2147483648$ og sú hæsta $2147483647$. Ástæðan fyrir því að lægri og hærri tölur en þessar valda villum er sú að MySQL notar einungis fjögur bæti til að geyma hverja heiltölu - hærri og lægri tölur komast ekki fyrir í svo litlu geymsluplássi.

Sé nauðsynlegt að geyma tölur sem ekki passa inn á þetta bil má nota gagnagerðina \verb|BIGINT| í stað \verb|INTEGER|. Slíkur dálkur geymir einnig heiltölur, en hefur átta bæti til að geyma hverja tölu. \verb|BIGINT| dálkur getur því geymt mun stærri (eða ``lengri'') tölur.

Sé vitað að tölurnar sem fara inn í dálkinn séu allar mjög litlar um sig má nota gagnagerðirnar \verb|TINYINT|, \verb|SMALLINT| og \verb|MEDIUMINT| í MySQL. Þær taka hver um sig $1$, $2$ og $3$ bæti til að geyma hverja tölu. Sjaldnast er ástæða til að nota þessar gagnagerðir í dag. Tafla þyrfti að innihalda tugi milljóna raða\footnote{Reyndar eru í dag til gagnagrunnstöflur til sem innihalda \emph{hundruðir milljarða} raða.} til að plásssparnaðurinn gæti skipt máli á nútíma tölvukerfum.

\begin{table}
\centering
\caption[Heiltöludálkar]{Heiltölugagnagerðir í MySQL og stærðir þeirra.}
\label{tafla:heiltolur}
\begin{tabular}{llll}
\toprule
Nafn&Stærð í&Lægsta gildi&Hæsta gildi\\
&bætum&&\\
\midrule
\verb|TINYINT|&1&$-128$&$127$\\
\verb|SMALLINT|&2&$-32768$&$32767$\\
\verb|MEDIUMINT|&3&$-8388608$&$8388607$\\
\verb|INT|&4&$-2147483648$&$2147483647$\\
\verb|BIGINT|&8&$-9223372036854775808$&$9223372036854775807$\\
\bottomrule
\end{tabular}
\end{table}

Ef sérstök skilyrði koma ekki upp er best og einfaldast að halda sig við \verb|INTEGER| til að geyma heiltölur. Þetta getur sérstaklega borgað sig ef seinna reynist nauðsynlegt að færa gagnagrunninn á milli gagnagrunnskerfa - sum gagnagrunnskerfi styðja ekki allar gagnagerðirnar sem MySQL býður upp á. Gamla góða \verb|INTEGER| er hins vegar alltaf til staðar.

\begin{example}
\caption[Heiltölur]{CREATE TABLE skipun sem gæti búið til töflu \ref{tafla:heiltolur} í MySQL. Hér er einfaldur \emph{INTEGER} dálkur notaður til að geyma fjölda bæta, \emph{BIGINT} þarf til að geyma lengstu tölurnar.}
\label{sql:k3d3-heiltolur}
\centering
\sql{sql/k3d3-heiltolur.sql}
\end{example}

\paragraph{Varúð: Íslenskar kennitölur} Freistandi getur verið að geyma kennitölur í heiltöludálkum. Þær eru jú kommulausar tölur, ekki satt? Nokkur atriði leiða þó til þess að þær passa ekki mjög vel í slíka dálka.

\begin{itemize}
 \item Stærsta tala sem hægt er að geyma í venjulegum \verb|INTEGER| dálki er $2147483647$. Það þýðir að kennitölur allra sem fæddir eru á 22. degi mánaðar eða seinna komast ekki fyrir í dálkinum! \verb|BIGINT| þyrfti að nota.
 \item Kennitölur eru ekki notaðar eins og flestar tölur. Þær eru t.d. ekki lagðar saman eða bornar saman með $<$ og $>$ virkjum. Við þurfum oftar að skoða ákveðna stafi í kennitölunni (t.d. fimmta og sjötta stafinn til að komast að fæðingarári) frekar en stærð tölunnar sjálfrar.
 \item Kennitölur eru venjulega skrifaðar með bandstrikum, sem eiga ekki heima í heiltöludálki.
\end{itemize}
Vænlegra er að nota \verb|CHAR| dálk til að geyma kennitölur. Lítum á þá gagnagerð í næsta kafla!

\subsection{VARCHAR og CHAR}


\subsection{DOUBLE}

\subsection{DECIMAL}

\subsection{DATE}

\subsection{BOOLEAN}

\section{Tóm gildi} % NULL, NOT NULL
\section{Innsetning gagna} % INSERT
\section{Aðallyklar} %PRIMARY KEY
\section{Að eyða töflum} % DROP